<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Daftar Judul - LKTI Generator</title><style><?!= cssContent ?></style></head><body><div id="loading-overlay"><div class="spinner"></div><h3 id="loading-text">Memproses...</h3></div><div class="app-container"><div class="page-card"><h2>Daftar Judul Tersimpan</h2><div class="sort-buttons"><button class="secondary" onclick="renderList('time')">Waktu</button><button class="secondary" onclick="renderList('alpha')">A-Z</button><button class="secondary" onclick="renderList('score')">Skor</button></div><div id="title-list"><p style="text-align:center;">Memuat data...</p></div><a href="<?= ScriptApp.getService().getUrl() ?>" class="nav-link">Kembali ke Halaman Utama</a></div></div><script><?!= jsContent ?></script><script>
let allTitlesData = [];
function renderList(sortBy = 'time') {
    const listContainer = document.getElementById('title-list');
    listContainer.innerHTML = '';
    let sortedList = [...allTitlesData];
    if (sortBy === 'alpha') { sortedList.sort((a, b) => a.judul.localeCompare(b.judul)); }
    else if (sortBy === 'score') { sortedList.sort((a, b) => b.skor - a.skor); }
    if (sortedList.length === 0) { listContainer.innerHTML = '<p style="text-align:center;">Belum ada judul yang dibuat.</p>'; return; }
    sortedList.forEach(item => {
        const div = document.createElement('div');
        div.className = 'title-list-item';
        div.onclick = () => window.location.href = `<?= ScriptApp.getService().getUrl() ?>?page=preview&id=${item.id}`;
        div.innerHTML = `<h4>${item.judul}</h4><p>Skor: <span>${item.skor}</span> | Dibuat pada: ${new Date(item.timestamp).toLocaleString('id-ID')}</p>`;
        listContainer.appendChild(div);
    });
}
document.addEventListener('DOMContentLoaded', () => {
    toggleLoading(true, 'Memuat Daftar Judul...');
    google.script.run.withSuccessHandler(response => {
        toggleLoading(false);
        if (response.success) {
            allTitlesData = response.data;
            renderList();
        } else { onFailure(response); }
    }).withFailureHandler(onFailure).getAllTitles();
});
</script></body></html>
